# Jira Integration Guide

## Overview
This project integrates with Jira using the MCP (Model Context Protocol) to automate test generation and execution based on Jira user stories.

## Setup

### 1. Environment Variables
Add to your environment (`.env` or GitHub Secrets):

```bash
JIRA_API_TOKEN=your-jira-api-token-here
```

**For local development:** Create `.env` file in project root
**For GitHub Actions:** Add as repository secret

### 2. Jira Configuration
- **Jira URL:** https://rakegowda015-1759229291995.atlassian.net
- **Username:** rakegowda015@gmail.com
- **MCP Server:** @timbreeding/jira-mcp-server

## Usage

### Read User Story and Create Test Plan
```bash
@jira-test-orchestrator read user story SCRUM-101
```

This will:
1. Fetch the Jira issue
2. Extract acceptance criteria
3. Create a test plan in `specs/SCRUM-101-*.md`

### Generate Tests from Plan
```bash
@playwright-test-generator implement tests from specs/SCRUM-101-*.md
```

### Execute Tests and Update Jira
```bash
# Run tests
npx playwright test

# Update Jira with results
@jira-test-orchestrator update SCRUM-101 with results
```

### GitHub Actions Workflow
Trigger from Actions tab:
1. Go to **Actions** ‚Üí **Jira Test Automation**
2. Click **Run workflow**
3. Enter Jira issue key (e.g., `SCRUM-123`)
4. Select action: `generate-and-test`

## Complete Workflow Example

```bash
# Step 1: Read Jira story
@jira-test-orchestrator read SCRUM-101

# Step 2: Generate tests (if not auto-triggered)
@playwright-test-generator implement specs/SCRUM-101-login.md

# Step 3: Run tests
npx playwright test

# Step 4: Update Jira
@jira-test-orchestrator update SCRUM-101 with results
```

## Jira Comment Format

After execution, Jira issues will have comments like:

```
üé≠ Automated Test Execution Results

User Story: SCRUM-101 - User Login Feature
Execution Date: 2026-02-11 10:30:00
Status: ‚úÖ All Passed

Summary:
- ‚úÖ Passed: 8
- ‚ùå Failed: 0
- ‚è≠Ô∏è Skipped: 0
- ‚è±Ô∏è Duration: 45s

Test Plan: specs/SCRUM-101-login.md

---
Generated by Playwright Test Automation
```

## Security Notes

‚ö†Ô∏è **NEVER commit Jira API tokens to version control**
- Use environment variables
- Use GitHub Secrets for CI/CD
- Rotate tokens regularly

## Troubleshooting

### Jira Connection Issues
```bash
# Test Jira MCP server
npx @timbreeding/jira-mcp-server@latest \
  --jira-base-url=https://rakegowda015-1759229291995.atlassian.net \
  --jira-username=rakegowda015@gmail.com \
  --jira-api-token=$JIRA_API_TOKEN
```

### Debug Mode
Set `DEBUG=true` in MCP configuration to see detailed logs.
